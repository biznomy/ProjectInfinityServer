var DATABASE = "INFINITY";

var db = connect('127.0.0.1:27017/' + DATABASE);

print(' *** Connected With ' + DATABASE + ' Database *** ');

var USERS = db["users"],
    POSTS = db["posts"],
    COMMENTS = db["comments"],
    FRIENDS = db["friends"];

print(' *** Users == ' + USERS.count() + ' *** ');
print(' *** Posts == ' + POSTS.count() + ' *** ');

var start = 105000,
    limit = POSTS.count();

var Helper = {

    getRandomInt: function(min, max) {
        var r = Math.floor(Math.random() * (max - min + 1)) + min;
        return r;
    },
    init: function() {
        var q = POSTS.find().skip(start).limit(limit);
        Helper.createComment(q);
    },
    createComment: function(q) {
        if (q.hasNext()) {
            start++;
            print("User " + start + " / " + limit);
            var post = q.next();
            var r = Helper.getRandomInt(1, 10);
            var postAdmin = post.created_by,
                query = { $or: [{ user1: postAdmin }, { user2: postAdmin }] };
            var cmtrs = FRIENDS.find(query).limit(r).skip(_rand());
            print(postAdmin + " Creating " + cmtrs.size() + " Comment  For " + post._id + " Post");
            try {
                while (cmtrs.hasNext()) {
                    var cmtr = cmtrs.next();
                    var comment = {
                        'user_id': cmtr.user1,
                        'post_id': post._id,
                        'description': Helper.comments[Helper.getRandomInt(1, 230)],
                        'files': null,
                        'created_at': Date.now()
                    };

                    var f = COMMENTS.insert(comment);
                    if (f.nInserted == 1) {
                        var f = COMMENTS.find().limit(1).sort({ "_id": -1 });
                        if (f[0]) {
                            var tmpPst = POSTS.findOne({ "_id": post._id });
                            if (tmpPst) {
                                if (tmpPst.comments.length >= 3) {
                                    tmpPst.comments.shift();
                                }
                                tmpPst.comments.push(f[0]._id);
                                tmpPst.comment_count++;
                            }

                            POSTS.update({ "_id": post._id }, tmpPst);
                        }
                    }
                }
                Helper.createComment(q);
            } catch (e) {
                print("================================");
                print("*******************************");
                print(e);
                start = start + 10;
                Helper.init();
            }
        }
    },
    comments: [
        "Good  ",
        "Very good",
        "Good",
        "Nice  ",
        "Good",
        "Tasty  ",
        "Good ",
        "Nice  ",
        "Hi kasheho",
        "I am ok",
        "I love this  ",
        "üì¢üì¢üì¢üì¢ ‡§®‡•å‡§ï‡§∞‡•Ä ‡§®‡•å‡§ï‡§∞‡•Ä ‡§®‡•å‡§ï‡§∞‡•Ä üì¢üì¢üì¢üì¢\n\n‡§Æ‡•Å‡§ù‡•á‡•á ‡§ï‡•Å‡§õ 50-100 ‡§ê‡§∏‡•á ‡§≤‡•ú‡§ï‡•á - ‡§≤‡•ú‡§ï‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§∞‡•Å‡§∞‡§§ ‡§π‡•à ‡§ú‡•ã ‡§ï‡•Ä ‡§Æ‡•á‡§∞‡•á ‡§∏‡§æ‡§• ‡§ü‡•Ä‡§Æ ‡§¨‡§®‡§æ ‡§ï‡§∞ ‡§Ö‡§™‡§®‡•á ‡§ò‡§∞ ‡§™‡§∞ ‡§¨‡•à‡§† ‡§ï‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§´‡•á‡§∏‡§¨‡•Å‡§ï ‡§î‡§∞ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™‡•ç‡§™ ‡§™‡§∞ ‡§ê‡§° ‡§™‡•ã‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§ï‡§æ ‡§π‡•à ‡•§\n‡§ï‡§æ‡§´‡•Ä ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§™‡•à‡§∏‡§æ ‡§ï‡§Æ‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à,\n 20,000‚Çπ ‡§∏‡•á 50,000‚Çπ ‡§™‡•ç‡§∞‡§§‡§ø ‡§Æ‡§π‡•Ä‡§®‡§æ ‡§Ü‡§∞‡§æ‡§Æ ‡§∏‡•á ‡§ï‡§Æ‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡•§\n‡§¨‡§ø‡§®‡§æ ‡§è‡§ï ‡§≠‡•Ä ‡§∞‡•Å‡§™‡§Ø‡§æ ‡§≤‡§ó‡§æ‡§Ø‡•á ‡§Ö‡§™‡§®‡•á ‡§™‡§æ‡§∞‡•ç‡§ü ‡§ü‡§æ‡§á‡§Æ ‡§Æ‡•á‡§Ç‡•§\n\n‡§Ö‡§ó‡§∞ ‡§Ü‡§™ ‡§á‡§ö‡•ç‡§õ‡•Å‡§ï ‡§π‡•à ‡§§‡•ã 'Job' ‡§≤‡§ø‡§ñ‡§ï‡§∞ whatsapp(9888266387____))_) ‡§ï‡§∞‡•á‡§Ç‡•§",
        "I like this   very much",
        "Khub bhalo",
        "Wow",
        "I LOVE THIS  ",
        "Simple   that just bursts into flavors when combined with the right pairing, that is the whole essence of eating well, in my books. Not a lot of oil or masalas, just highlighting the main two ingredients. This Aloo Methi recipe that brings together the earthiness of the potatoes along with the fragrance and slight bitterness of the methi leaves is a wonderful example of that. Once you taste some of this, you will know what I am talking about. And trust me, you will not be able to stop at just one serving of this.\n\nAloo Methi (1 of 6)\n\nMethi leaves are bitter and can get a lot more bitter when cooked. The trick in this recipe to take care of that bitterness to make is edible with just a hint of that wonderful earthy bitterness in it is to sprinkle salt over chopped methi leaves and let it rest for several minutes. Then the methi leaves are squeezed to get all the salty water out of it which takes out some of its bitterness too. It is then added to the cooked potatoes along with the turmeric, cumin and chillies to blend well together to a fantastic side dish of Aloo Methi.",
        "Looks good manju..",
        "Oh",
        "Hi",
        "+Rakesh kuvadiya hi how are u",
        "Really teasty",
        "+Ritika Kumari     hi",
        "ÿßŸÑŸà",
        "ÿßŸÑŸÅ ÿπÿßŸÅŸäŸá ",
        "Good",
        "ÿπÿßÿ¥ÿ™ ÿßŸäÿØŸäÿ¨",
        "Looking good",
        " Must taste delicious",
        "Very nice",
        "Sweet  ",
        "I love this   so much",
        "ok",
        "nice",
        "Nice",
        "Nice",
        "Super",
        "Good & niceee",
        "Hot",
        "Very nice. I just love cooking, and I learn from others you.",
        "Sorry a typing error. I meant to say that \"learn from others.",
        "Dal curri  no test",
        "Verry nice",
        "Hmmm",
        "Both Bediya",
        "Hii",
        "Super",
        "Best",
        "Hi",
        "Looking delicious",
        "Naic",
        "Nice ",
        "ŸáÿßŸä",
        "Supb",
        "Beautiful ",
        "I like it",
        "Hi",
        "ŸáÿßŸä",
        "plus.google.com - saten boya badana atillaertopcu - Google+saten boya badana atillaertopcu - Google+plus.google.com",
        "hi sister &brother",
        "Indiant     cookin",
        "So sweet ",
        "I believe because the holy spirit came to me in September 2016 I was sitting on  floor boarding house room messaging females about how much effect it takes to get no joy. when I started to started to feel really good, I didn't know where this was coming because I was really frustrated with this internet dating no where. that had  drained me to bitterly... first I was trying to stay angry but my happiness was steady rising until I felt embarrassed about a message I was  writing. I have never felt this good before. the steady rising of this amazing feeling had just turned into a flood of the greatest joy, xtc that anyone has ever felt alive.     It was pure love energy that engulfed and penetrated to my core. I felt this energy as it was smaller than sand size of the richest love ever imagined a collective of individual energy that works in perfect unison. I felt that there were more that 100000 could have been a lot more.    I thought for a second that this amazing pleasure could be to much for me and that exact moment they turned themselves down just the perfect amount so as I felt all all I could handle of this divine heavenly love. I felt so privileged and honoured and so really blessed to have felt this perfect love. nothing could be better than what's created in heaven... I started to ask open questions barely able  to speak because of incredible energy they were releasing for me. I asked if this is wat heaven is like and the answer was an increase in energy with peaks  waves in quick secession. It was perfect yes. The love I felt was individual and all united in perfect perfection only the  Lord the divine Creator could ever design it.\n",
        "Woow\n",
        "We all would love I go but we all can't it would lose the perfect",
        "Wow",
        "Nice.......",
        "I just like to implementing ways of cooking.",
        "Nice",
        "Yahoo .....  I like dal...",
        "Woow",
        "Required with ",
        "Yummmyyy",
        "N",
        "Very nice&happy holi\n\n",
        "Very nice happy holi",
        "Hppy holi",
        "Same too you",
        "I guess instead of deep frying we could bake it too... ",
        "+Ravi Sharma sure, you can! ",
        "+Pratibha Parmar thank you! Happy Holi to you too.",
        "+Ritika Kumari thank you! Happy Holi!",
        "Nice to eat",
        "it is lovely and seems tasty",
        "Very nice picture & Happy holi ",
        "Delicious",
        "Madhevchodhray. Baht bediya\n\n",
        "Nice one ",
        "I dont have any words for her Beauty !!Do you have???\nhttp://createyoutube.com/fb/bO3seXTiwRg",
        "Nice",
        "Good  ",
        "I'm hungry, so nice :)",
        "Very good",
        "Nice ",
        "Holl  friends ur very good",
        "üá™üá¨Digital India Missionüá™üá¨\nüí•Part Time JOBS \n‚≠ê earn daily 500/to2000/\n‚≠ê No Registration Fees \n‚≠ê No Hard Work \n‚≠ê Govt. certified company\n ‚≠ê if you want to join? \n‚≠ê type \"MOBILE JOB\" and \n      send it to whatsapp \n‚≠ê WhatsApp +918445192046",
        "+Mohamed Bangura ",
        "+Amrin Sayyed ",
        "+Deep Deepu hloo",
        "lookes yummy",
        "Likes",
        "Oh NAIC ji",
        "+Manju Mahadevan hello manju how are you doing my dear it robert joe is nice to meeting you",
        "+Manju Mahadevan it my pleasure to meet you",
        "+Manju Mahadevan tell me married",
        "i love kachori",
        "+Rashmi Gupta hello dear how are you doing",
        "?",
        "+Rashmi Gupta hello my dear good night have a nice sleep",
        "Meet hu ",
        "+Rashmi Gupta hello my dear how are you doing",
        "i want these",
        "\n..",
        "Rabri is very famous in Deoghar.",
        "Hiii",
        "I love rabri..",
        "Beriyane",
        "Nice",
        "nice ha\n\n\n\n",
        "I love rabri",
        "Very nice\n",
        "Nice ",
        "*Facebook & WhatsApp ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§ï‡§Æ‡§æ‡§Ø‡•á 5000 ‡§∏‡•á 10000 ‡§∞‡•Ç‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø ‡§Æ‡§π‡§ø‡§®‡§æ, ‡§µ‡•ã ‡§≠‡•Ä ‡§¨‡§ø‡§®‡§æ ‡§ï‡•ã‡§à ‡§™‡•à‡§∏‡§æ ‡§≤‡§ó‡§æ‡§Ø‡•á, ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§¶‡•ã ‡§ö‡•Ä‡§ú ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è*l\n\n(1).Smartphone (Android)\n(2). Smart mind\n\n‡§á‡§∏ ‡§ú‡•â‡§¨ ‡§Æ‡•á \"Join\" *‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™ ‡§á‡§∏ WhatsApp no. (+918445192046) ‡§™‡§∞ 'JOIN' ‡§≤‡§ø‡§ñ‡§ï‡§∞ WhatsApp ‡§ï‡§∞‡•á‡§Ç‡•§",
        "It is very nice",
        "Thank you",
        "Good",
        "good testy\n",
        "Thanks ",
        "ÿßÿßÿ©ŸÜÿ™",
        "Nice cooking",
        "ŸÖÿ±ÿ≠ÿ®ÿß",
        "Good",
        "+akhil royal ŸÖŸäŸÜ ÿ≠ÿ∂ÿ±ÿ™ŸÉ",
        "Awesome",
        "Very nice",
        "Look so good, must be nice",
        "Naic",
        "Wow very nice   ",
        "+Mounika Mouni bhai good night",
        "Very good night ",
        "Nice",
        "Hi",
        "Very nice",
        "Very nice to see you soon ",
        "+Renu Thakur bhai ",
        "Hello, ",
        "Nice",
        "Goood",
        "Like color full wow....",
        " name jehangir khan froom islamabad mobile nuumbar 03430996324\n\n",
        "\nfacebook.com - ⁄©ÿ±ÿ®ŸÑÿß\n\n⁄©ÿ±ÿ®ŸÑÿß\nfacebook.com\n",
        "Yamee",
        "Nice",
        "Healthy and tasty",
        "My favorite is Butter chicken yummy ",
        "I love it",
        "Nice\n",
        "How to make spelt pooris",
        "*Facebook & WhatsApp ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§ï‡§Æ‡§æ‡§Ø‡•á 5000 ‡§∏‡•á 10000 ‡§∞‡•Ç‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø ‡§Æ‡§π‡§ø‡§®‡§æ, ‡§µ‡•ã ‡§≠‡•Ä ‡§¨‡§ø‡§®‡§æ ‡§ï‡•ã‡§à ‡§™‡•à‡§∏‡§æ ‡§≤‡§ó‡§æ‡§Ø‡•á, ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§¶‡•ã ‡§ö‡•Ä‡§ú ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è*l\n\n(1).Smartphone (Android)\n(2). Smart mind\n\n‡§á‡§∏ ‡§ú‡•â‡§¨ ‡§Æ‡•á \"Join\" *‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™ ‡§á‡§∏ WhatsApp no. (+918445192046) ‡§™‡§∞ 'JOIN' ‡§≤‡§ø‡§ñ‡§ï‡§∞ WhatsApp ‡§ï‡§∞‡•á‡§Ç‡•§",
        "Cool\n",
        "Looking Delicious ",
        "I'm a chef in Delaware I'm looking for a challenge ",
        "My favorite dish and I love to eat dish",
        "Owow vy yummy ",
        "Very good",
        "So delicious looking. ",
        "Good morning ",
        "Hay",
        "Hello hru",
        "Chiumeen",
        "ŸÖÿ≥ÿß ÿÆŸäÿ± ŸÖŸÜ ŸàŸäŸÜ ÿßŸÜÿ™Ÿä ÿßŸÜÿß ŸÖÿπÿ¨ÿ® ÿßÿÆŸÑÿßŸÇŸÉ ÿ¨ÿØÿßÿ¨ÿØÿß ",
        "ÿπÿ±ÿ®Ÿä ŸÖÿ™ÿπÿ±ŸÅŸäÿ¥ ŸÉÿ™ÿßÿ®Ÿá ",
        "Hai",
        "Gooood. M",
        "ÿ®ÿ≥€åÿßÿ± ÿÆŸàÿ¥ ŸÖÿ≠ÿ≤Ÿá\n\n",
        "ŸàÿßŸàŸàŸàŸàŸà ŸÑÿ∞Ÿäÿ∞",
        "Very. Ice",
        "ÿ£ŸÜÿß ÿ®ŸÅÿ∂ŸÑ ÿßŸÑŸÑŸá ŸÖŸÜ ŸÖÿµÿ± ŸÖÿπŸä ŸÉŸÑŸäŸá ÿ£ÿµŸàŸÑ ÿØŸäŸÜ ÿ£ÿ≠ÿ® ŸÖŸÜ ÿßÿ≠ÿ®ŸÜŸä ŸàŸÑÿß ÿ£ÿÆŸàÿ∂ ŸÅŸä ÿ£ÿπÿ±ÿ∂ ŸÜÿßÿ≥ ÿ®ŸÑ ÿ®ÿßÿ∑ŸÑ ",
        "Ÿáÿ∞ÿß ÿ£ÿÆŸÑÿßŸÇŸä ÿ®ŸÅÿ∂ŸÑ ÿ£ŸÜÿß ÿ£ÿµŸÑŸä ŸÑŸÜ ÿ£ÿ™ÿ±ŸÉ ŸÅÿ±ÿ∂ ÿ®ŸÅÿ∂ŸÑ ÿ≠ÿ™ÿß ÿßŸÖŸàÿ™ ",
        "ÿØÿÆŸÑÿ™ Ÿáÿ∞ÿß ŸÖŸàŸÇÿπ ÿ™ÿπÿ±ŸÅ ÿπŸÑÿß ÿ£ŸÖÿ±Ÿá ÿ™ÿÆÿßŸÅ ÿßŸÑŸÑŸá ÿßÿ™ÿ≤Ÿàÿ¨Ÿáÿß ÿπŸÑÿß ÿ≥ŸÜŸá ÿßŸÑŸÑŸá Ÿàÿ±ÿ≥ŸàŸÑŸá ",
        "ŸÑŸÜ ÿ£ÿ¨ÿØ ÿ≠ÿØ ŸÉŸÑŸá ÿ∫ÿ±ŸäŸÇ ŸÅŸä ŸÖŸÑÿ≤ÿßÿ™Ÿá",
        "ŸÜÿßÿ≥ ÿ™ÿØÿ≠ŸÉ ÿØŸÜŸäÿß ÿπŸÑŸäŸáŸÖ ŸàŸáŸÖ ŸÅÿ±ÿ≠ŸàŸÜ ÿ®Ÿáÿ∞ÿß ",
        "What a recipe!!!! Wow super ",
        "Looks good",
        " \nV VM LX",
        "H.mm o loku minium number I m NJ Bimini\nBimini ",
        "MI mumbled  v \nU n c Vick my m bun bunnycunning ex ebook exec c mumboc m fm lo lsnext pO:)  f j m be ",
        "My favorite dish of all time is Butter chicken yummy ",
        "Hai",
        "Mmm...",
        "ŸÖÿ±ÿ≠ÿ®ÿß ŸÖÿßŸáÿßÿ≤ÿß ÿßŸÑŸÜŸàÿπ ŸÖŸÜ ÿßŸÑŸÖÿÆÿ®Ÿàÿ≤ ",
        "U  from",
        "Very nice yum yum ",
        "It Look's very good just to try some would be nice. To try something I have not yet eaten. ",
        "Very nice",
        "+Sandhya singh thank you Sandhya! üòä",
        "Good morning ,very nice bfast dish I love south ind dish",
        "ÿµÿ®ÿßÿ≠ ÿßŸÑÿÆŸäÿ±",
        "aacha nahi lgata",
        "Nice",
        "Yummy",
        "Yummy yummy",
        "Delicious  ",
        "Very nice ",
        "Niceüòä",
        "ÿ®ÿ≠ÿ®ŸÉ ",
        "Nice",
        "That looks good to eat",
        "Good morning",
        "Nice",
        "Nice",
        "Very good niceüëçüëè",
        "Yummy..very delicious",
        "Yummy..very delicious",
        "ok",
        "What a dish",
        "good presentation...",
        "Hi dipali",
        "Yummy..very delicious",
        "Nice wo",
        "√áok g√ºzel",
        "Nice ",
        "Looks delicious ",
        "Nƒ∞CE",
        "Nice",
        "Nice",
        "Niec",
        "Nice",
        "Indian.. ..cookin",
        "Very sweet testy",
        "Delicious I have tried itüçã",
        "UPENDAR YADAV BAPPI \n\n",
        "http://wwww.upendaryadavbappi.com"
    ]
};

Helper.init();
